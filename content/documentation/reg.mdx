---
header: Система регистрации
blocks:
  - event: "## reg.request\n\nРегистрация абонента\n\nПараметры:\n\n* ОбработатьВручную bool - признак ручной обработки заявки в случае проблем с проверками\n  * По умолчанию false\n  * Не влияет на обработку заявки без ошибок\n  * В случае проблем с прохождением проверок, без данного флага, заявка завершает обработку с ошибкой\n  * В случае проблем с прохождением проверок, при наличии флага, заявка попадает в ручную обработку\n  * В случае ручной обработки, необходимо обратиться в техподдержку и сообщить ID события заявки\n* ДосылДокументов boolean - флаг активации возможности досыла документов в процессе обработки заявки на регистрацию\n  * По умолчанию false\n* ИдТочкиИдентификации string - ид офиса центра идентификации для проведения идентификации личности\n  * Следует указывать тот офис, который удобен клиенту, например географически ближайший\n* Абонент struct - набор реквизитов юридического или физического лица\n  * Обязательный\n  * Тип string - тип абонента\n    * Обязательный\n    * Одно из допустимых значений: ЮЛ, ОП, ИП, ФЛ\n    * Влияет на проверки других атрибутов\n  * ИНН string - идентификационный номер налогоплательщика\n    * Обязательный\n  * КПП string - код причины постановки на учет в налоговом органе\n    * Обязательный для ЮЛ и ОП\n  * ОГРН string - основной государственный регистрационный номер\n    * Обязательный для ЮЛ, ОП, ИП\n    * Если ЮЛ является иностранной организацией, то наличие ОГРН необязательно\n  * НаименованиеКраткое string\n    * Обязательный\n    * Как в выписке из ЕГРЮЛ/ЕГРИП для ЮЛ, ОП, ИП\n    * ФИО как в паспорте для ФЛ\n    * Ограничение по длине - 500 символов\n  * НаименованиеПолное string\n    * Ограничение по длине - 500 символов\n    * Обязательное при работе с направлением ФСС в сервисе отчетности\n    * Должно совпадать с наименованием в отправляемых отчетах по направлению ФСС\n  * Телефон string - телефон для связи с абонентом\n    * В международном формате\n  * Почта string - адрес электронной почты для связи с абонентом\n    * Ограничение по длине - 100 символов\n  * АдресЮридический struct\n    * Обязательный для:\n      * ЮЛ и ОП - должен полностью соответствовать адресу в выписке из ЕГРЮЛ\n      * ИП - в случае подключения направлений ЭДО, ЭПД (должен соответствовать фактическому адресу нахождения ИП). При подключении других направлений является необязательным\n    * Индекс string - почтовый индекс в международном формате\n    * КодРегиона string - двузначный код субъекта РФ\n      * Обязательный\n      * Одно из допустимых значений согласно Приказу ФНС от России от 31.03.2017 N ММВ-7-21/271 (ред. от 04.10.2018)\n    * Район string\n    * Город string\n      * Обязательный, если не указан НасПункт\n    * НасПункт string\n      * Обязательный, если не указан Город\n    * Улица string\n    * Дом string\n    * Корпус string\n    * Квартира string\n  * АдресФактический struct\n    * Структура полностью аналогична АдресЮридический\n  * К\uFEFFатегорияА\uFEFFбонента srtring - категория абонента\n    * Н\uFEFFеобязательный\n    * О\uFEFFдно из допустимых значений: Представитель, Налогоплательщик\n    * п\uFEFFо умолчанию принимает значение Налогоплательщик\n* ВладельцыКЭП array - список данных о владельцах для выпуска ЭП и регистрации\n  * Обязательный, не должен быть пустым списком\n  * Элементы списка в формате:\n  * ИдВладельцаЭП string - уникальный идентификатор владельца ЭП\n    * Обязательный, когда ДосылДокументов=true\n    * Если ДосылДокументов=false и не передан - формируется автоматически и может быть получен в ответном событии\n    * Изменяется в рамках Абонента только при изменении фактического ФЛ (например при смене директора).\n  * МестоХраненияЭП\_string\_- место хранения ключей ЭП\n    * Одно из допустимых значений:\_ОблачноеХранилище,\_МобильноеУстройство,\_ВнешнееХранилище\n  * КодовоеСлово\_string\_-\_кодовое слово аутентификации, сформированное приложением myDSS 2.0\n  * ЛогинCloudCSP string - логин доступа к Cloud CSP\n  * ИдСертификата string - идентификатор сертификата ВладельцаЭП в DSS\n    * Применяется для использования ранее выпущенного сертификата в DSS в рамках нового Абонента\n  * ОтправитьКодАктивации boolean - флаг автоматической отправки смс с секретным кодом активации на мобильное устройство.\n    * По умолчанию true\n    * Применим только для работы с подписью в DSS\n  * Телефон string - номер мобильного телефона владельца КЭП\n    * Обязательный\n    * В международном формате\n    * В случае с подписью в DSS на указанный номер будет отправлено смс с секретным кодом активации\n  * Почта string - адрес электронной почты\n    * Обязательный\n    * Ограничение по длине - 100 символов\n  * ФИО struct\n    * Обязательный\n    * Фамилия string\n      * Обязательный\n      * Ограничение по длине - 64 символа\n    * Имя string\n      * Обязательный\n      * Ограничение по длине - 64 символа\n    * Отчество string\n      * Ограничение по длине - 64 символа\n  * ФайлСертификата string идентификатор сертификата\n    * Обязательный при работе с локальной подписью\n    * Допустимые форматы файла сертификата: .pem, .crt, .cer, .der\n    * Содержимое файла может быть передано в der или base64 кодировке\n  * ФайлЗапросаНаСертификат string идентификатор файла запроса для выпуска сертификата\n    * Содержимое файла может быть передано в der и base64 кодировке\n    * В запросе на сертификат обязательно должен быть указан тип криптопровайдера\n  * СНИЛС string - страховой номер индивидуального лицевого счета\n    * Обязательный только при выпуске ЭП в DSS, при регистрации локальной подписи не передается\n  * ИННФЛ string - идентификационный номер налогоплательщика физического лица\n    * Обязательный с 01.11.2021 при выпуске ЭП по заявлению ЮЛ и ОП\n    * О\uFEFFбязательный в случае, если Абонент.Тип==ИП и ВладельцыКЭП.ДоверенноеЛицо == true\n  * Пол string - пол владельца сертификата\n    * Обязательный только при работе с подписью в DSS\n    * Одно из допустимых значений: М, Ж\n  * Паспорт struct\n    * Обязательный при выпуске КЭП для DSS и выпуске КЭП через передачу готового запроса на сертификат\n    * Гражданство string - Альфа 3 код страны\n      * Обязательный при выпуске КЭП для DSS и выпуске КЭП через передачу готового запроса на сертификат\n      * Одно из допустимых значений [по справочнику](https://ru.wikipedia.org/wiki/ISO_3166-1)\n    * Серия string\n      * Обязательный при выпуске КЭП для DSS, при выпуске КЭП через передачу готового запроса на сертификат, для гражданства RUS\n    * Номер string\n      * Обязательный\n    * КодПодразделения string\n      * Обязательный при выпуске КЭП для DSS, при выпуске КЭП через передачу готового запроса на сертификат, для гражданства RUS\n    * ДатаВыдачи string\n      * Обязательный при выпуске КЭП для DSS и выпуске КЭП через передачу готового запроса на сертификат\n    * КемВыдан string\n      * Обязательный при выпуске КЭП для DSS и выпуске КЭП через передачу готового запроса на сертификат\n      * Ограничение по длине - 200 символов\n    * ДатаРождения string\n      * Обязательный при выпуске КЭП для DSS и выпуске КЭП через передачу готового запроса на сертификат\n    * МестоРождения string\n      * Обязательный при выпуске КЭП для DSS и выпуске КЭП через передачу готового запроса на сертификат\n      * Ограничение по длине - 150 символов\n  * Сотрудник struct - данные о полномочиях владельца в организации\n    * Обязательный для ЮЛ и ОП,если не указан ФайлСертификата или ФайлЗапросаНаСертификат\n    * Должность string - должность владельца сертификата\n      * Обязательный для ЮЛ и ОП\n      * Ограничение по длине - 255 символов\n    * Подразделение string - подразделение владельца сертификата\n      * Ограничение по длине - 255 символов\n  * Д\uFEFFоверенноеЛицо boolean - флаг, определяющий, что ВладелецКЭП является доверенным лицом Абонента по МЧД\n    * П\uFEFFо умолчанию false\n  * С\uFEFFписокМЧД array - список идентификационных номеров МЧД, определяющих полномочия ВладельцаКЭП\n    * О\uFEFFграничение по длине - 36 символов\n  * Документы array - список файлов документов, прикрепляемых к заявке владельца\n    * Передача пустого массива не допускается\n    * Элементы списка в формате:\n    * Тип string - семантический тип содержимого документа\n      * Обязательный\n      * Одно из допустимых значений: УдостоверениеЛичности, Заявление, ИНН,  ИННФЛ,  СНИЛС, ФотоВладельцаСертификатаСПаспортом, ДокументПолномочия, МЧД\\_B2B\\_ФНС, МЧД\\_B2G\\_ФНС, МЧД\\_Unified\n    * Комментарий string - описание документа в свободной форме\n      * Ограничение по длине - 300 символов\n    * Файлы array - список файлов документов\n      * Обязательный\n      * д\uFEFFля файлов МЧД\\_B2B\\_ФНС, МЧД\\_B2G\\_ФНС и МЧД\\_Unified, если МЧД была зарегистрирована через сервис МЧД Астрал.Платформы, можно использовать идентификаторы, полученные ранее при регистрации МЧД в событии poa.registration.request\n    * ФайлПодписи string - идентификатор файла подписи к документу\n      * Обязательный для МЧД\\_B2B\\_ФНС, МЧД\\_B2G\\_ФНС, МЧД\\_Unified\n      * если МЧД была зарегистрирована через сервис МЧД Астрал.Платформы, можно использовать идентификаторы, полученные ранее при регистрации МЧД в событии poa.registration.request\n      * Если указан ФайлПодписи, то длина массива Файлы должна быть равна 1\n  * ДоступныеНаправления array - список разрешенных направлений для Владельца КЭП\n    * Элементы массива в формате\n      * Тип string – семантический тип для подключения направления\n        * Одно из допустимых значений: ФНС, ПФР, Росстат, ФСС, ЭДО, МакетыПФР, РАР, РПН, ЭПД\n      * Шифровальщик boolean -  признак, определяющий, что сертификат Владельца КЭП будет использован для шифрования/дешифрования отчетности в КО\n        * Обязательный для Тип==ФНС\n        * По умолчанию true\n* Направления array - список подключаемых направлений для сдачи отчетности\n  * Обязательный для работы с сервисом передачи отчетности\n  * Тип string – семантический тип для подключения направления\n    * Обязательный\n    * Одно из допустимых значений: ФНС, ПФР, Росстат, ФСС, ЭДО, МакетыПФР, РАР, РПН, ЭПД\n  * КодПодразделения string – код подразделения контролирующего органа\n    * Обязательный для типов направлений ФНС,  ПФР, МакетыПФР, Росстат\n    * Необязательный для типов направлений ЭДО и ЭПД\n    * не передается для направлений ФСС, РАР, РПН\n  * НомерПФР string – регистрационный номер в ПФР\n    * Обязательный для типов направлений ПФР и МакетыПФР\n    * не передается для остальных направлений\n  * НомерФСС string – регистрационный номер в ФСС\n    * Обязательный только для типа направления ФСС\n    * не передается для остальных направлений\n  * СЭДО boolean - флаг подключения к СЭДО в ФСС\n    * Применим только для типа направления ФСС\n      * По умолчанию false\n    * не передается для остальных направлений\n  * СписокКПП массив string – список кодов причины постановки на учет\n    * Обязательный для типа абонента ЮЛ и ОП с направлением ФНС\n    * не передается для остальных направлений и типов абонентов\n  * СписокОКПО массив string - список общественных классификаторов предприятий и организаций\n    * Обязательный для типа направления Росстат\n    * не передается для остальных направлений\n* Тарифы array - список подключаемых тарифов\n  * Применяется для самостоятельного ручного подключения тарифов абоненту\n  * Ид string - идентификатор тарифа\n    * Обязательный\n  * ДатаОкончания string устанавливаемая дата окончания срока действия тарифа\n    * Не должна превышать дату окончания тарифа автоматически устанавливаемую в соответствии с договором\n    * В формате DD.MM.YYYY\n"
    _template: events
  - scenario: >
      ## Регистрация абонента


      1. В файловое хранилище загружаются необходимые для регистрации документы.
      В ответ возвращаются метаданные по загруженным файлам. Метод отправки
      запроса:[POST/files](https://test.platform.astral.ru/documentation?tab=2\&dataIndex=1#post-files)
      <SwaggerLink />
    _template: checklists
  - string: >-
      Внутренний основной сервис регистрации, который используется для
      регистрации, изменения данных Пользователей в системе и
      выпуска/перевыпуска УКЭП для использования в других сервисах Астрал
      Платформы.
    _template: desc
---

